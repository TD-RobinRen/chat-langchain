{
  
  "name": "callback-OTU1MjIyYm",
  "title": "Request callback from queue",
  "version": "6.29.1",
  "icon": "callback",
  "description": "Allow your contact to register a callback.",
  "initial_step": false,
  "interactive": false,
  "dynamic": false,
  "max_execution_time": 10000,
  "supported_trigger_types": [
    "voice_inbound",
    "module"
  ],
  "status": "available",
  "properties": {
    "_ui_": {
      "order": [
        "request_parameters",
        "outbound_settings",
        "assignment_parameters",
        "priority",
        "time_limit",
        "messages_to_play"
      ]
    },
    "type": "object",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "required": [
      "assignment_parameters",
      "priority",
      "time_limit",
      "messages_to_play"
    ],
    "properties": {
      "priority": {
        "_ui_": {
          "type": "radio_choice",
          "title": "Select how to define priority"
        },
        "oneOf": [
          {
            "type": "object",
            "title": "List of priorities",
            "required": [
              "priorities_list"
            ],
            "properties": {
              "priorities_list": {
                "_ui_": {
                  "hint": "Priorities are defined 1-10 in which 1 is the highest priority value and 10 is the lowest priority value.",
                  "type": "inline_options"
                },
                "enum": [
                  1,
                  2,
                  3,
                  4,
                  5,
                  6,
                  7,
                  8,
                  9,
                  10
                ],
                "default": 10
              }
            },
            "additionalProperties": false
          },
          {
            "type": "object",
            "title": "Variable in the flow context",
            "required": [
              "priorities_context"
            ],
            "properties": {
              "priorities_context": {
                "_ui_": {
                  "type": "simple_selection_dropdown",
                  "data_source": "context"
                },
                "type": "number",
                "default": 10
              }
            },
            "additionalProperties": false
          }
        ],
        "title": "Priority",
        "description": "Define the priority for this assignment request"
      },
      "time_limit": {
        "type": "object",
        "title": "Maximum waiting time",
        "required": [
          "time"
        ],
        "properties": {
          "time": {
            "_ui_": {
              "hint": "Value should be between 5 minutes and 48 hours",
              "type": "timer",
              "time_unit": "hours"
            },
            "type": "number",
            "title": "Time",
            "default": 3,
            "maximum": 48,
            "minimum": 0.0833333
          }
        },
        "description": "Maximum time to find the configured assignment",
        "additionalProperties": false
      },
      "messages_to_play": {
        "_ui_": {
          "type": "selection_group",
          "title": "Select the type of message"
        },
        "oneOf": [
          {
            "_ui_": {
              "order": [
                "language",
                "tts_callback_request",
                "tts_callback_waiting"
              ]
            },
            "type": "object",
            "title": "Text to Speech",
            "required": [
              "language",
              "tts_callback_request"
            ],
            "properties": {
              "language": {
                "_ui_": {
                  "type": "language_selection"
                },
                "enum": [
                  "de-DE",
                  "en-US",
                  "en-GB",
                  "es-ES",
                  "fr-FR",
                  "it-IT",
                  "pt-PT",
                  "pt-BR",
                  "ru-RU",
                  "da-DK",
                  "ca-ES",
                  "nl-NL",
                  "en-AU",
                  "en-CA",
                  "en-IN",
                  "fi-FI",
                  "fr-CA",
                  "ja-JP",
                  "ko-KR",
                  "nb-NO",
                  "pl-PL",
                  "es-MX",
                  "sv-SE",
                  "zh-CN",
                  "zh-HK",
                  "zh-TW",
                  "arb",
                  "de-AT",
                  "en-NZ",
                  "en-ZA",
                  "en-GB-WLS",
                  "hi-IN",
                  "is-IS",
                  "ro-RO",
                  "es-US",
                  "tr-TR",
                  "cy-GB"
                ],
                "title": "Language of audio output",
                "default": "en-US",
                "description": "(1) Language only available if you have text to Speech powered by Amazon Polly enabled in your account"
              },
              "tts_callback_request": {
                "_ui_": {
                  "order": [
                    "callback_successful",
                    "callback_failed"
                  ],
                  "container": {
                    "tag": "Contact",
                    "icon": "user",
                    "type": "timeline_container"
                  }
                },
                "type": "object",
                "title": "Request callback",
                "required": [
                  "callback_successful",
                  "callback_failed"
                ],
                "properties": {
                  "callback_failed": {
                    "_ui_": {
                      "type": "textarea"
                    },
                    "type": "string",
                    "title": "Error in request",
                    "default": "",
                    "minLength": 1,
                    "description": "Will play if an error occurred during request."
                  },
                  "callback_successful": {
                    "_ui_": {
                      "type": "textarea"
                    },
                    "type": "string",
                    "title": "Request successful",
                    "default": "",
                    "minLength": 1,
                    "description": "Will play if the callback was successfully requested."
                  }
                }
              },
              "tts_callback_waiting": {
                "_ui_": {
                  "container": {
                    "tag": "Contact",
                    "icon": "user",
                    "type": "timeline_container",
                    "last_element": true
                  }
                },
                "type": "object",
                "title": "Waiting for callback",
                "properties": {
                  "callback_unsuccessful": {
                    "_ui_": {
                      "type": "radio_choice",
                      "container": {
                        "type": "small_title_section"
                      }
                    },
                    "oneOf": [
                      {
                        "type": "object",
                        "title": "Don't play message",
                        "properties": {},
                        "additionalProperties": false
                      },
                      {
                        "_ui_": {
                          "type": "textarea"
                        },
                        "type": "string",
                        "title": "Call and play message",
                        "default": "",
                        "minLength": 1
                      }
                    ],
                    "title": "Timeout / No match / Error",
                    "description": "Only plays if the expiration period is reached, agents don't pickup or an error occurs."
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "_ui_": {
              "order": [
                "asset_callback_request",
                "asset_callback_waiting"
              ]
            },
            "type": "object",
            "title": "Audio file upload",
            "required": [
              "asset_callback_request"
            ],
            "properties": {
              "asset_callback_request": {
                "_ui_": {
                  "order": [
                    "callback_successful",
                    "callback_failed"
                  ],
                  "container": {
                    "tag": "Contact",
                    "icon": "user",
                    "type": "timeline_container"
                  }
                },
                "type": "object",
                "title": "Request callback",
                "required": [
                  "callback_successful",
                  "callback_failed"
                ],
                "properties": {
                  "callback_failed": {
                    "type": "object",
                    "properties": {
                      "talkdesk_resource": {
                        "_ui_": {
                          "hint": "Allowed files types: .wav and .mp3",
                          "type": "audio_file_upload",
                          "metadata": {
                            "context": "CXM"
                          },
                          "data_source": "assets",
                          "placeholder": "Please choose a file...",
                          "supported_formats": "audio/mp3,audio/mpeg,audio/wav"
                        },
                        "type": "object",
                        "title": "Error in request",
                        "required": [
                          "id",
                          "type"
                        ],
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "type": {
                            "enum": [
                              "asset"
                            ],
                            "default": "asset"
                          }
                        },
                        "description": "Will play if an error occurred during request.",
                        "additionalProperties": false
                      }
                    },
                    "additionalProperties": false
                  },
                  "callback_successful": {
                    "type": "object",
                    "properties": {
                      "talkdesk_resource": {
                        "_ui_": {
                          "hint": "Allowed files types: .wav and .mp3",
                          "type": "audio_file_upload",
                          "metadata": {
                            "context": "CXM"
                          },
                          "data_source": "assets",
                          "placeholder": "Please choose a file...",
                          "supported_formats": "audio/mp3,audio/mpeg,audio/wav"
                        },
                        "type": "object",
                        "title": "Request successful",
                        "required": [
                          "id",
                          "type"
                        ],
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "type": {
                            "enum": [
                              "asset"
                            ],
                            "default": "asset"
                          }
                        },
                        "description": "Will play if the callback was successfully requested.",
                        "additionalProperties": false
                      }
                    },
                    "additionalProperties": false
                  }
                }
              },
              "asset_callback_waiting": {
                "_ui_": {
                  "container": {
                    "tag": "Contact",
                    "icon": "user",
                    "type": "timeline_container",
                    "last_element": true
                  }
                },
                "type": "object",
                "title": "Waiting for callback",
                "properties": {
                  "callback_unsuccessful": {
                    "_ui_": {
                      "type": "radio_choice",
                      "container": {
                        "type": "small_title_section"
                      }
                    },
                    "oneOf": [
                      {
                        "type": "object",
                        "title": "Don't play message",
                        "properties": {},
                        "additionalProperties": false
                      },
                      {
                        "type": "object",
                        "title": "Call and play message",
                        "required": [
                          "talkdesk_resource"
                        ],
                        "properties": {
                          "talkdesk_resource": {
                            "_ui_": {
                              "hint": "Allowed files types: .wav and .mp3",
                              "type": "audio_file_upload",
                              "metadata": {
                                "context": "CXM"
                              },
                              "data_source": "assets",
                              "placeholder": "Please choose a file...",
                              "supported_formats": "audio/mp3,audio/mpeg,audio/wav"
                            },
                            "type": "object",
                            "required": [
                              "id",
                              "type"
                            ],
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "type": {
                                "enum": [
                                  "asset"
                                ],
                                "default": "asset"
                              }
                            },
                            "additionalProperties": false
                          }
                        },
                        "additionalProperties": false
                      }
                    ],
                    "title": "Timeout / No match / Error",
                    "description": "Only plays if the expiration period is reached, agents don't pickup or an error occurs."
                  }
                },
                "additionalProperties": false
              }
            },
            "additionalProperties": false
          },
          {
            "_ui_": {
              "type": "radio_choice"
            },
            "oneOf": [
              {
                "_ui_": {
                  "order": [
                    "url_callback_request",
                    "url_callback_waiting"
                  ]
                },
                "type": "object",
                "title": "URL to audio file",
                "required": [
                  "url_callback_request"
                ],
                "properties": {
                  "url_callback_request": {
                    "_ui_": {
                      "order": [
                        "callback_successful",
                        "callback_failed"
                      ],
                      "container": {
                        "tag": "Contact",
                        "icon": "user",
                        "type": "timeline_container"
                      }
                    },
                    "type": "object",
                    "title": "Request callback",
                    "required": [
                      "callback_successful",
                      "callback_failed"
                    ],
                    "properties": {
                      "callback_failed": {
                        "_ui_": {
                          "hint": "Allowed formats are .mp3 and .wav",
                          "type": "input_test_play_audio",
                          "placeholder": "Insert the link to your audio file..."
                        },
                        "type": "string",
                        "title": "Error in request",
                        "format": "uri",
                        "default": "",
                        "pattern": "http(s)?://.+",
                        "minLength": 5,
                        "description": "Will play if an error occurred during request."
                      },
                      "callback_successful": {
                        "_ui_": {
                          "hint": "Allowed formats are .mp3 and .wav",
                          "type": "input_test_play_audio",
                          "placeholder": "Insert the link to your audio file..."
                        },
                        "type": "string",
                        "title": "Request successful",
                        "format": "uri",
                        "default": "",
                        "pattern": "http(s)?://.+",
                        "minLength": 5,
                        "description": "Will play if the callback was successfully requested."
                      }
                    }
                  },
                  "url_callback_waiting": {
                    "_ui_": {
                      "container": {
                        "tag": "Contact",
                        "icon": "user",
                        "type": "timeline_container",
                        "last_element": true
                      }
                    },
                    "type": "object",
                    "title": "Waiting for callback",
                    "properties": {
                      "callback_unsuccessful": {
                        "_ui_": {
                          "type": "radio_choice",
                          "container": {
                            "type": "small_title_section"
                          }
                        },
                        "oneOf": [
                          {
                            "type": "object",
                            "title": "Don't play message",
                            "properties": {},
                            "additionalProperties": false
                          },
                          {
                            "_ui_": {
                              "hint": "Allowed formats are .mp3 and .wav",
                              "type": "input_test_play_audio",
                              "placeholder": "Insert the link to your audio file..."
                            },
                            "type": "string",
                            "title": "Call and play message",
                            "format": "uri",
                            "default": "",
                            "pattern": "http(s)?://.+",
                            "minLength": 5
                          }
                        ],
                        "title": "Timeout / No match / Error",
                        "description": "Only plays if the expiration period is reached, agents don't pickup or an error occurs."
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "additionalProperties": false
              },
              {
                "_ui_": {
                  "order": [
                    "url_callback_request_context",
                    "url_callback_waiting_context"
                  ]
                },
                "type": "object",
                "title": "Variable in the flow context",
                "required": [
                  "url_callback_request_context"
                ],
                "properties": {
                  "url_callback_request_context": {
                    "_ui_": {
                      "order": [
                        "callback_successful",
                        "callback_failed"
                      ],
                      "container": {
                        "tag": "Contact",
                        "icon": "user",
                        "type": "timeline_container"
                      }
                    },
                    "type": "object",
                    "title": "Request callback",
                    "required": [
                      "callback_successful",
                      "callback_failed"
                    ],
                    "properties": {
                      "callback_failed": {
                        "_ui_": {
                          "type": "simple_selection_dropdown",
                          "data_source": "context",
                          "placeholder": "Select a variable..."
                        },
                        "type": "string",
                        "title": "Error in request",
                        "description": "Will play if an error occurred during request."
                      },
                      "callback_successful": {
                        "_ui_": {
                          "type": "simple_selection_dropdown",
                          "data_source": "context",
                          "placeholder": "Select a variable..."
                        },
                        "type": "string",
                        "title": "Request successful",
                        "description": "Will play if the callback was successfully requested."
                      }
                    }
                  },
                  "url_callback_waiting_context": {
                    "_ui_": {
                      "container": {
                        "tag": "Contact",
                        "icon": "user",
                        "type": "timeline_container",
                        "last_element": true
                      }
                    },
                    "type": "object",
                    "title": "Waiting for callback",
                    "properties": {
                      "callback_unsuccessful": {
                        "_ui_": {
                          "type": "radio_choice",
                          "container": {
                            "type": "small_title_section"
                          }
                        },
                        "oneOf": [
                          {
                            "type": "object",
                            "title": "Don't play message",
                            "properties": {},
                            "additionalProperties": false
                          },
                          {
                            "_ui_": {
                              "type": "simple_selection_dropdown",
                              "data_source": "context",
                              "placeholder": "Select a variable..."
                            },
                            "type": "string",
                            "title": "Call and play message"
                          }
                        ],
                        "title": "Timeout / No match / Error",
                        "description": "Only plays if the expiration period is reached, agents don't pickup or an error occurs."
                      }
                    },
                    "additionalProperties": false
                  }
                },
                "additionalProperties": false
              }
            ],
            "title": "Other sources"
          }
        ],
        "title": "Messages to Play",
        "description": "Define the messages for the different events that may occur in a callback."
      },
      "request_parameters": {
        "_ui_": {
          "order": [
            "custom_phone_number",
            "extension"
          ]
        },
        "type": "object",
        "title": "Request parameters",
        "properties": {
          "extension": {
            "_ui_": {
              "type": "radio_choice",
              "title": "Extension usage"
            },
            "oneOf": [
              {
                "type": "object",
                "title": "No extension",
                "properties": {},
                "additionalProperties": false
              },
              {
                "type": "object",
                "title": "From variable in the flow context",
                "required": [
                  "extension_from_context"
                ],
                "properties": {
                  "extension_from_context": {
                    "_ui_": {
                      "type": "simple_selection_dropdown",
                      "data_source": "context"
                    },
                    "type": "string",
                    "default": ""
                  }
                },
                "additionalProperties": false
              }
            ]
          },
          "custom_phone_number": {
            "_ui_": {
              "type": "radio_choice",
              "title": "Number to dial"
            },
            "oneOf": [
              {
                "type": "object",
                "title": "Inbound number",
                "properties": {},
                "additionalProperties": false
              },
              {
                "type": "object",
                "title": "From variable in the flow context",
                "required": [
                  "custom_phone_number_from_context"
                ],
                "properties": {
                  "custom_phone_number_from_context": {
                    "_ui_": {
                      "type": "simple_selection_dropdown",
                      "data_source": "context",
                      "placeholder": "Select variable for number..."
                    },
                    "type": "string",
                    "default": ""
                  }
                },
                "additionalProperties": false
              }
            ]
          }
        },
        "description": "Configure callback according to the context parameters received."
      },
      "outbound_settings": {
        "title": "Outbound caller id",
        "description": "Select and configure the caller ID to use in the outgoing call",
        "_ui_": {
          "type": "selection_group",
          "title": "Number to use on callback"
        },
        "oneOf": [
          {
            "type": "object",
            "title": "Use same as inbound call",
            "properties": {},
            "additionalProperties": false
          },
          {
            "type": "object",
            "title": "Use a different number",
            "_ui_": {
              "type": "radio_choice",
              "title": "Select how to find outbound number"
            },
            "oneOf": [
              {
                "type": "object",
                "title": "Talkdesk account number",
                "required": [
                  "caller_id"
                ],
                "properties": {
                  "caller_id": {
                    "_ui_": {
                      "type": "simple_selection_dropdown",
                      "data_source": "numbers",
                      "placeholder": "Select an option"
                    },
                    "type": "string"
                  },
                  "additionalProperties": false
                }
              },
              {
                "type": "object",
                "title": "Variable in flow context",
                "required": [
                  "context_caller_id"
                ],
                "properties": {
                  "context_caller_id": {
                    "_ui_": {
                      "type": "simple_selection_dropdown",
                      "data_source": "context",
                      "placeholder": "Select an option"
                    },
                    "type": "string"
                  },
                  "additionalProperties": false
                }
              }
            ]
          }
        ]
      },
      "assignment_parameters": {
        "_ui_": {
          "type": "selection_group",
          "title": "Select assignment type"
        },
        "oneOf": [
          {
            "type": "object",
            "title": "Ring Groups",
            "properties": {
              "ring_groups": {
                "_ui_": {
                  "type": "radio_choice",
                  "title": "Select how to find ring groups"
                },
                "oneOf": [
                  {
                    "type": "object",
                    "title": "List of Ring Groups in your account",
                    "required": [
                      "ring_groups_list"
                    ],
                    "properties": {
                      "ring_groups_list": {
                        "_ui_": {
                          "type": "multi_selection_dropdown",
                          "data_source": "ring_groups",
                          "placeholder": "Select"
                        },
                        "type": "array",
                        "items": {
                          "type": "string"
                        },
                        "minItems": 1
                      }
                    },
                    "additionalProperties": false
                  },
                  {
                    "type": "object",
                    "title": "Variables in the flow context",
                    "required": [
                      "ring_groups_context"
                    ],
                    "properties": {
                      "ring_groups_context": {
                        "_ui_": {
                          "type": "multi_selection_dropdown",
                          "data_source": "context"
                        },
                        "type": "array",
                        "items": {
                          "type": "string"
                        },
                        "minItems": 1
                      }
                    },
                    "additionalProperties": false
                  }
                ]
              }
            },
            "additionalProperties": false
          },
          {
            "type": "object",
            "title": "Agents",
            "properties": {
              "agents": {
                "_ui_": {
                  "type": "radio_choice",
                  "title": "Select how to find agents"
                },
                "oneOf": [
                  {
                    "type": "object",
                    "title": "List of agents in your account",
                    "required": [
                      "agents_list"
                    ],
                    "properties": {
                      "agents_list": {
                        "_ui_": {
                          "type": "multi_selection_dropdown",
                          "data_source": "agents",
                          "placeholder": "Select"
                        },
                        "type": "array",
                        "items": {
                          "type": "string",
                          "minLength": 1
                        },
                        "minItems": 1,
                        "data_source": "agents"
                      }
                    },
                    "additionalProperties": false
                  },
                  {
                    "type": "object",
                    "title": "Variables in the flow context",
                    "required": [
                      "agents_context"
                    ],
                    "properties": {
                      "agents_context": {
                        "_ui_": {
                          "type": "multi_selection_dropdown",
                          "data_source": "context"
                        },
                        "type": "array",
                        "items": {
                          "type": "string"
                        },
                        "minItems": 1
                      }
                    },
                    "additionalProperties": false
                  }
                ]
              }
            },
            "additionalProperties": false
          },
          {
            "_ui_": {
              "order": [
                "icon_with_text_and_link",
                "attributes"
              ]
            },
            "type": "object",
            "title": "Attributes",
            "required": [
              "attributes"
            ],
            "properties": {
              "attributes": {
                "_ui_": {
                  "order": [
                    "attributes_rule",
                    "attributes_list"
                  ]
                },
                "type": "object",
                "required": [
                  "attributes_rule",
                  "attributes_list"
                ],
                "properties": {
                  "attributes_list": {
                    "_ui_": {
                      "field": {
                        "type": "oneof_array",
                        "add_button": {
                          "type": "link",
                          "label": "Attribute"
                        },
                        "button_type": "popup"
                      },
                      "items": {
                        "type": "inline"
                      },
                      "options": {
                        "empty_array_message": "Add an attribute or a variable"
                      }
                    },
                    "type": "array",
                    "items": {
                      "_ui_": {
                        "field": {
                          "type": "one_of_calendar"
                        },
                        "container": {
                          "type": "empty_container"
                        }
                      },
                      "oneOf": [
                        {
                          "_ui_": {
                            "icon": "star_half",
                            "container": {
                              "type": "inline_fields_container"
                            },
                            "icon_color": "green_700"
                          },
                          "type": "object",
                          "title": "Attribute",
                          "required": [
                            "attribute"
                          ],
                          "properties": {
                            "attribute": {
                              "_ui_": {
                                "type": "attribute_proficiency_container",
                                "order": [
                                  "attribute_id",
                                  "proficiency"
                                ]
                              },
                              "type": "object",
                              "required": [
                                "attribute_id",
                                "proficiency"
                              ],
                              "properties": {
                                "proficiency": {
                                  "_ui_": {
                                    "type": "dropdown",
                                    "field": {
                                      "type": "proficiency_selector"
                                    },
                                    "options": [
                                      {
                                        "color": "dark_green",
                                        "label": "5 stars",
                                        "number_of_stars": 5,
                                        "proficiency_value": 100
                                      },
                                      {
                                        "color": "green",
                                        "label": "4 stars",
                                        "number_of_stars": 4,
                                        "proficiency_value": 80
                                      },
                                      {
                                        "color": "yellow",
                                        "label": "3 stars",
                                        "number_of_stars": 3,
                                        "proficiency_value": 60
                                      },
                                      {
                                        "color": "orange",
                                        "label": "2 stars",
                                        "number_of_stars": 2,
                                        "proficiency_value": 40
                                      },
                                      {
                                        "color": "red",
                                        "label": "1 star",
                                        "number_of_stars": 1,
                                        "proficiency_value": 20
                                      }
                                    ],
                                    "container": {
                                      "type": "empty_container"
                                    },
                                    "placeholder": "Select a proficiency"
                                  },
                                  "enum": [
                                    0,
                                    20,
                                    40,
                                    60,
                                    80,
                                    100
                                  ],
                                  "type": "number"
                                },
                                "attribute_id": {
                                  "_ui_": {
                                    "type": "simple_selection_dropdown",
                                    "container": {
                                      "type": "empty_container"
                                    },
                                    "data_source": "attributes_abr",
                                    "placeholder": "Select an attribute"
                                  },
                                  "type": "string"
                                }
                              }
                            }
                          },
                          "additionalProperties": false
                        },
                        {
                          "_ui_": {
                            "icon": "code_braces",
                            "container": {
                              "type": "inline_fields_container"
                            },
                            "icon_color": "blue_700"
                          },
                          "type": "object",
                          "title": "Variable",
                          "required": [
                            "variable"
                          ],
                          "properties": {
                            "variable": {
                              "_ui_": {
                                "order": [
                                  "attribute_variable_name",
                                  "proficiency"
                                ],
                                "container": {
                                  "type": "attribute_variable_proficiency_container"
                                }
                              },
                              "type": "object",
                              "required": [
                                "attribute_variable_name",
                                "proficiency"
                              ],
                              "properties": {
                                "proficiency": {
                                  "_ui_": {
                                    "type": "dropdown",
                                    "field": {
                                      "type": "proficiency_selector"
                                    },
                                    "options": [
                                      {
                                        "color": "dark_green",
                                        "label": "5 stars",
                                        "number_of_stars": 5,
                                        "proficiency_value": 100
                                      },
                                      {
                                        "color": "green",
                                        "label": "4 stars",
                                        "number_of_stars": 4,
                                        "proficiency_value": 80
                                      },
                                      {
                                        "color": "yellow",
                                        "label": "3 stars",
                                        "number_of_stars": 3,
                                        "proficiency_value": 60
                                      },
                                      {
                                        "color": "orange",
                                        "label": "2 stars",
                                        "number_of_stars": 2,
                                        "proficiency_value": 40
                                      },
                                      {
                                        "color": "red",
                                        "label": "1 star",
                                        "number_of_stars": 1,
                                        "proficiency_value": 20
                                      }
                                    ],
                                    "container": {
                                      "type": "empty_container"
                                    },
                                    "placeholder": "Select a proficiency"
                                  },
                                  "enum": [
                                    0,
                                    20,
                                    40,
                                    60,
                                    80,
                                    100
                                  ],
                                  "type": "number"
                                },
                                "attribute_variable_name": {
                                  "_ui_": {
                                    "type": "simple_selection_dropdown",
                                    "container": {
                                      "type": "empty_container"
                                    },
                                    "data_source": "context",
                                    "placeholder": "Select a variable"
                                  },
                                  "type": "string"
                                }
                              }
                            }
                          },
                          "additionalProperties": false
                        }
                      ]
                    },
                    "title": "Attributes",
                    "maxItems": 10,
                    "minItems": 1
                  },
                  "attributes_rule": {
                    "_ui_": {
                      "type": "radio_choice",
                      "options": {
                        "or": {
                          "label": "OR condition",
                          "description": "Any agent with one or all attributes is considered eligible for assignment."
                        },
                        "and": {
                          "label": "AND condition",
                          "description": "Only agents with all the selected attributes will be eligible."
                        }
                      }
                    },
                    "enum": [
                      "or",
                      "and"
                    ],
                    "type": "string",
                    "title": "Attributes rule",
                    "default": "or"
                  }
                }
              },
              "icon_with_text_and_link": {
                "_ui_": {
                  "type": "icon_with_text_and_link",
                  "link_url": "https://studio.talkdesk.com/docs/reporting",
                  "icon_name": "info",
                  "link_text": "Find how reporting works with Attributes.",
                  "icon_color": "co--primary-600",
                  "description": "Want to report this step? Make sure a Reporting step comes earlier in the flow."
                }
              }
            },
            "additionalProperties": false
          }
        ],
        "title": "Assignment Parameters",
        "description": "Select and configure which attributes will be used for matching a call with an agent"
      }
    },
    "additionalProperties": false
  },
  "default_exits": [
    {
      "name": "call_finished",
      "type": "optional",
      "title": "Call finished",
      "description": "There was a successful match and a conversation with an agent has finished",
      "effects": {
        "post_call": true,
        "voice_participant": true
      }
    },
    {
      "name": "contact_rejected",
      "type": "invisible",
      "title": "Contact rejected"
    },
    {
      "name": "agent_rejected",
      "type": "invisible",
      "title": "Agent rejected"
    },
    {
      "name": "call_aborted",
      "type": "invisible",
      "title": "Call aborted"
    },
    {
      "name": "ok",
      "type": "invisible",
      "title": "Ok",
      "description": "If the component succeeds"
    },
    {
      "name": "invalid",
      "type": "mandatory",
      "title": "Invalid Inbound Phone Number",
      "description": "If contact is calling with anonymous or invalid caller id"
    },
    {
      "name": "invalid_outbound_caller_id",
      "type": "optional",
      "title": "Invalid Outbound Caller Id",
      "description": "If selected caller id is invalid"
    },
    {
      "name": "error",
      "type": "invisible",
      "title": "Error",
      "description": "If an error occurs"
    },
    {
      "name": "room_finished",
      "type": "invisible",
      "title": "Room finished"
    },
    {
      "name": "queue_size_limit_reached",
      "type": "invisible",
      "title": "Queue size limit reached"
    }
  ],
  "data": {
    "type": "object",
    "$schema": "http://json-schema.org/draft-04/schema#",
    "properties": {
      "user_id": {
        "type": "string",
        "title": "agent id"
      }
    },
    "additionalProperties": false
  },
  "data_sources": {
    "agents": {
      "path": "assignment_parameters.agents.agents_list",
      "data_type": "array"
    }
  },
  "pre_conditions": {
    "voice_participant": true,
    "post_call": false
  },
  "metadata": {},
  "enabled_accounts": [],
  "function_mapping": {
    "function": {
      "name": "callback",
      "version": "2.0.0"
    },
    "templates": {
      "input": {
        "engine": "mustache_json",
        "template": "{ {{#properties}} {{#outbound_settings}}{{#caller_id}} \"outbound_phone_number\": \"{{caller_id}}\",{{/caller_id}}{{^caller_id}}{{#context_caller_id}} \"outbound_phone_number\": \"{{context_caller_id}}\",{{/context_caller_id}}{{/caller_id}}{{/outbound_settings}}{{#request_parameters}}{{#extension}}{{#extension_from_context}}\"extension\": \"{{extension_from_context}}\", {{/extension_from_context}}{{/extension}}{{#custom_phone_number}}{{#custom_phone_number_from_context}}\"custom_phone_number\": \"{{custom_phone_number_from_context}}\", {{/custom_phone_number_from_context}}{{/custom_phone_number}}{{/request_parameters}} {{#assignment_parameters}}\"attributes\": {{#agents}}{\"type\": \"string\", {{#agents_list.length}}\"comparison_function\": \"contains\", \"name\": \"id\", \"value\": {{agents_list}}, {{/agents_list.length}}{{#agents_context.length}}\"comparison_function\": \"contains\", \"name\": \"email\", \"value\": {{agents_context.compact}}, {{/agents_context.length}} }, {{/agents}} {{#ring_groups}}{\"type\": \"set\", \"comparison_function\": \"contains\", \"name\": \"ring_groups\"{{#ring_groups_list.length}}, \"value\": {{ring_groups_list}} {{/ring_groups_list.length}}{{#ring_groups_context.length}}, \"value\": {{ring_groups_context.compact}} {{/ring_groups_context.length}} }, {{/ring_groups}}{{#attributes}}{\"type\": \"set\", \"comparison_function\": \"contains\", \"name\": \"attributes\", \"value\":{\"attribute_query\": { \"operator\": \"{{{attributes_rule}}}\", \"args\":[{{#attributes_list}}{\"proficiency\": {{#attribute}}{{{proficiency}}}{{/attribute}}{{#variable}}{{{proficiency}}}{{/variable}}, \"comparison_operator\": \"gte\", {{#attribute}}\"attribute_id\": \"{{{attribute_id}}}\"}{{/attribute}}{{#variable}}\"attribute_name\": \"{{{attribute_variable_name}}}\"}{{/variable}}, {{/attributes_list}}]}} }, {{/attributes}}{{/assignment_parameters}}{{#priority}}{{#priorities_list}}\"priority\": {{{priorities_list}}}, {{/priorities_list}}{{#priorities_context}}\"priority\": {{{priorities_context}}}, {{/priorities_context}}{{/priority}}{{#time_limit}}\"time_limit\": {{{time}}}, {{/time_limit}}{{#messages_to_play}}\"callback_request_successful\": { {{#tts_callback_request}}\"type\": \"text\",\"language\": \"{{language}}\",\"value\": \"{{callback_successful}}\"{{/tts_callback_request}}{{#url_callback_request}}\"type\": \"file_url\",\"value\": \"{{callback_successful}}\"{{/url_callback_request}}{{#url_callback_request_context}}\"type\": \"file_url\",\"value\": \"{{callback_successful}}\"{{/url_callback_request_context}}{{#asset_callback_request.callback_successful.talkdesk_resource}}\"type\": \"asset\",\"value\": \"{{id}}\"{{/asset_callback_request.callback_successful.talkdesk_resource}} },\"callback_request_failed\": { {{#tts_callback_request}}\"type\": \"text\",\"language\": \"{{language}}\",\"value\": \"{{callback_failed}}\"{{/tts_callback_request}}{{#url_callback_request}}\"type\": \"file_url\",\"value\": \"{{callback_failed}}\"{{/url_callback_request}}{{#url_callback_request_context}}\"type\": \"file_url\",\"value\": \"{{callback_failed}}\"{{/url_callback_request_context}}{{#asset_callback_request.callback_failed.talkdesk_resource}}\"type\": \"asset\",\"value\": \"{{id}}\"{{/asset_callback_request.callback_failed.talkdesk_resource}} },\"callback_waiting_unsuccess\": { {{#tts_callback_waiting}}{{^callback_unsuccessful.empty?}}\"type\": \"text\",\"language\": \"{{language}}\",\"value\": \"{{callback_unsuccessful}}\"{{/callback_unsuccessful.empty?}}{{/tts_callback_waiting}}{{#url_callback_waiting_context}}{{^callback_unsuccessful.empty?}}\"type\": \"file_url\",\"value\": \"{{callback_unsuccessful}}\"{{/callback_unsuccessful.empty?}}{{/url_callback_waiting_context}}{{#url_callback_waiting}}{{^callback_unsuccessful.empty?}}\"type\": \"file_url\",\"value\": \"{{callback_unsuccessful}}\"{{/callback_unsuccessful.empty?}}{{/url_callback_waiting}}{{#asset_callback_waiting}}{{#callback_unsuccessful}}{{#talkdesk_resource}}\"type\": \"asset\",\"value\": \"{{id}}\"{{/talkdesk_resource}}{{/callback_unsuccessful}}{{/asset_callback_waiting}} }{{/messages_to_play}}, {{/properties}} \"exit_transitions\": { {{#exits}}  {{#transition}} \"{{name}}\": \"{{transition}}\", {{/transition}} {{/exits}} } }"
      },
      "output": {
        "engine": "broken_mustache",
        "template": "{ \"exit\": {{{output}}}, {{#data}} \"output_data\": {{{data}}} {{/data}} }"
      }
    },
    "max_execution_time": 187210
  }
}
